'use strict';

const progressBars = document.getElementsByClassName('progress-bar'),
    buttons = document.getElementsByClassName('btn'),
    progressView = document.getElementsByClassName('percent'),
    pb_1 = progressBars[0], prog_1 = progressView[0],
    pb_2 = progressBars[1], prog_2 = progressView[1],
    pb_3 = progressBars[2], prog_3 = progressView[2],
    selector = document.getElementById('selector');

    function progressControl(selectedValue){
        if(selectedValue == 'pb_1'){
            selectedValue = pb_1;
        } else if(selectedValue == 'pb_2'){
            selectedValue = pb_2;
        } else if(selectedValue == 'pb_3'){
            selectedValue = pb_3;
        }

        let progress = parseInt(selectedValue.style.width);

        for(let i=0; i<buttons.length; i++){
            let eachBtn = buttons[i],
                controlBtn = parseInt(eachBtn.textContent);

            eachBtn.addEventListener('click', function(){
                console.log(selectedValue);
                console.log(`progress ${progress} , controlBtn ${controlBtn}`);
                progress += controlBtn;
                if(progress > 100){
                    selectedValue.classList.add('progress-bar-danger');
                } else if(progress <= 100 && progress >= 0) {
                    selectedValue.classList.remove('progress-bar-danger');
                } else {
                    progress = 0;
                }
                selectedValue.style.width = progress+'%';
                //progressPercent.textContent = selectedValue.style.width;
            });
        }
    }

selector.addEventListener('change', function(){
    let selectedValue = selector.options[selector.selectedIndex].value;
    //console.log(selectedValue);
    progressControl(selectedValue);
});